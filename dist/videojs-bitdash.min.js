/*! videojs-bitdash - v0.0.0 - 2015-10-09
* Copyright (c) 2015 benjipott; Licensed Apache-2.0 */
videojs.Bitdash=videojs.Html5.extend({init:function(a,b,c){videojs.Html5.call(this,a,b,c);document.getElementById("video").getElementsByTagName("video")[0];a.trigger("loadedmetadata")}}),videojs.Bitdash.prototype.bitdashPlayer={},videojs.Bitdash.extend=function(a,b,c){for(c in b)b.hasOwnProperty(c)&&("[object Object]"===Object.prototype.toString.call(b[c])?a[c]=videojs.Bitdash.extend(a[c]||{},b[c]):a[c]=b[c]);return a},videojs.Bitdash.prototype.setSrc=function(a){this.bitdashPlayer.load(a)},videojs.Bitdash.prototype.load=function(){this.bitdashPlayer.load(this.player().currentSrc())},videojs.Bitdash.prototype.dispose=function(){this.bitdashPlayer.destroy(),videojs.Html5.prototype.dispose.call(this)},videojs.Bitdash.extractMime=function(a){var b=/(\/[^?]+).*/,c=a.match(b),d=c[1].split("."),e=d.length>1?d.pop():"mp4";return e},videojs.Bitdash.extractType=function(a){var b=videojs.Bitdash.extractMime(a.src),c={};switch(b){case"m3u8":c.type="application/vnd.apple.mpegurl",c.format="hls";break;case"mpd":c.type="application/dash+xml",c.format="dash"}return c},videojs.Bitdash.prototype.onClick=function(a){},videojs.Bitdash.prototype.createEl=function(){var a=this.player_,b=a.tag,c={};videojs.Html5.disposeMediaElement(b),b=videojs.createEl("div",{id:a.id()+"_bitdash_api",className:"vjs-tech"}),b.player=a,videojs.insertFirst(b,a.el()),videojs.obj.each(a.options_.sources,function(a,b){var d=videojs.Bitdash.extractType(b);c[d.format]=b.src});var d={key:this.options().key,source:c,playback:{autoplay:a.options().autoplay,muted:a.options().muted,audioLanguage:["fr","en"],subtitleLanguage:"fr"},style:{width:"100%",height:"100%",controls:!1}};return this.bitdashPlayer=new bitdash(b.id).setup(d),this.bitdashPlayer.addEventHandler("onReady",videojs.bind(this,function(a){this.triggerReady()})),this.bitdashPlayer.addEventHandler("onPlay",videojs.bind(this,this.onPlay)),this.bitdashPlayer.addEventHandler("onError",videojs.bind(this,this.onError)),this.bitdashPlayer.addEventHandler("onVolumeChange",videojs.bind(this,this.onVolumeChange)),this.bitdashPlayer.addEventHandler("onMute",videojs.bind(this,this.onVolumeChange)),this.bitdashPlayer.addEventHandler("onUnmute",videojs.bind(this,this.onVolumeChange)),this.bitdashPlayer.addEventHandler("onSeek",videojs.bind(this,this.onSeek)),this.bitdashPlayer.addEventHandler("onStopBuffering",videojs.bind(this,this.onStopBuffering)),this.bitdashPlayer.addEventHandler("onFullscreenEnter",videojs.bind(this,this.onFullscreenChange)),this.bitdashPlayer.addEventHandler("onFullscreenExit",videojs.bind(this,this.onFullscreenChange)),this.bitdashPlayer.addEventHandler("onPlaybackFinished",videojs.bind(this,this.onEnded)),this.bitdashPlayer.addEventHandler("onTimeChanged",videojs.bind(this,this.onTimeChanged)),this.bitdashPlayer.addEventHandler("onVideoPlaybackQualityChange",videojs.bind(this,this.onQualityChange)),b},videojs.Bitdash.prototype.onQualityChange=function(a){this.trigger("bitratechange")},videojs.Bitdash.prototype.onTimeChanged=function(a){this.trigger("durationchange")},videojs.Bitdash.prototype.onFullscreenChange=function(a){this.trigger("fullscreenchange")},videojs.Bitdash.prototype.onPlay=function(a){this.trigger("play")},videojs.Bitdash.prototype.onError=function(a){this.trigger("error")},videojs.Bitdash.prototype.onEnded=function(a){this.trigger("ended")},videojs.Bitdash.prototype.onVolumeChange=function(a){this.trigger("volumechange")},videojs.Bitdash.prototype.onStopBuffering=function(a){this.trigger("seeked")},videojs.Bitdash.prototype.onSeek=function(a){this.trigger("seeking")},videojs.Bitdash.prototype.play=function(){this.bitdashPlayer.play()},videojs.Bitdash.prototype.pause=function(){this.bitdashPlayer.pause()},videojs.Bitdash.prototype.paused=function(){return this.bitdashPlayer.isPaused()},videojs.Bitdash.prototype.currentTime=function(){return this.bitdashPlayer.getCurrentTime()},videojs.Bitdash.prototype.duration=function(){return this.bitdashPlayer.getDuration()},videojs.Bitdash.prototype.setCurrentTime=function(a){this.bitdashPlayer.seek(a)},videojs.Bitdash.prototype.buffered=function(){return this.bitdashPlayer.isStalled()},videojs.Bitdash.prototype.volume=function(){return this.bitdashPlayer.getVolume()/100},videojs.Bitdash.prototype.setVolume=function(a){this.bitdashPlayer.setVolume(100*a)},videojs.Bitdash.prototype.muted=function(){return this.bitdashPlayer.isMuted()},videojs.Bitdash.prototype.setMuted=function(a){a?this.bitdashPlayer.mute():this.bitdashPlayer.unmute()},videojs.Bitdash.prototype.enterFullScreen=function(){this.bitdashPlayer.enterFullScreen()},videojs.Bitdash.prototype.exitFullScreen=function(){this.bitdashPlayer.exitFullScreen()},videojs.Bitdash.supportsNativeHls=function(){var a,b,c=document.createElement("video");return videojs.Html5.isSupported()?(a=c.canPlayType("application/x-mpegURL"),b=c.canPlayType("application/vnd.apple.mpegURL"),/probably|maybe/.test(a)||/probably|maybe/.test(b)):!1}(),videojs.Bitdash.isSupported=function(){return!videojs.Bitdash.supportsNativeHls&&window.Uint8Array},videojs.Bitdash.canPlaySource=function(a){var b=/^application\/dash\+xml/i;return b.test(a.type)},videojs.options.techOrder.unshift("bitdash"),videojs.MediaTechController.withSourceHandlers(videojs.Bitdash),videojs.Bitdash.nativeSourceHandler={},videojs.Bitdash.nativeSourceHandler.canHandleSource=function(a){return!0},videojs.Bitdash.nativeSourceHandler.handleSource=function(a,b){b.setSrc(a)},videojs.Bitdash.nativeSourceHandler.dispose=function(){},videojs.Bitdash.registerSourceHandler(videojs.Bitdash.nativeSourceHandler);